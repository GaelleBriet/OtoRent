# J9

Ok, on recroise encore des routers et des states. L'idée va être, dans ce challenge de mettre en place un début de navigation avec notre router. Puis grâce à notre StateManager, on va faire en sorte de Stocker nos modèles dans le contexte applicatif de l'application.

La procédure de navigation que nous allons mettre en place est la suivante :

- Au lancement de l'application on affiche la liste complète des agences
- Au clique sur une agence on affiche la liste des véhicule
- Les véhicules sont filtrés en fonction de l'agence sélectionnée

Pour tout cela, on utilisera l'API mise à disposition dans le dossier dédié.

## Etape 1 - Mise en place de l'écran de liste des agences

Mettez en place votre nouvel écran (en vous inspirant de ce qui éxiste pour les véhicules)

Vous aurez besoin :

- De créer l'écran.
- Créer le modèle lié aux agences
- Créer le service qui va nous retourner la liste des agences
- Intégrer cette liste dans votre écran
- Définir cet écran comme page `home`

Le client nous a donné une liste des agences ci-dessous. A vous de l'adapter 

## Etape 2 - Mise en place du router

Maitenant que vous avez deux écrans tout beaux tout propres, on va essayer de les faire s'enchaîner.

Pour celà :

- Installez la librairie permettant de mettre ne place le routing de notre application
- Définissez les routes de votre application
  - `/agences` pour la liste des agences
  - `/vehicles` pour la liste des véhicules
- Rappeler que `/agence` sera votre route initiale
- Dans l'écran de la liste des agence, déclancher l'appel de la route `/vehicles` au clique sur l'une des agences (une petite recherche sur les [GestureDetector](https://api.flutter.dev/flutter/widgets/GestureDetector-class.html) peut vous aider)


Votre navigation est en place, on va maitenant se concentrer sur le StateManager afin de mettre en place le filtre des véhicules. On devra certainement modifier notre router pour lui ajouter un parmétre à notre route `/vehicles`.

## Etape 3 - Mise en place de notre StateManager

1 - La première étape va être d'installer notre librairie qui va gérer nos States.

2 - On va avoir besoin de deux gérer deux States dans notre application actuelle

- Une liste des véhicules
- Une liste des agences

On va commencer par travailler sur la liste des agence. 

### Gestion des agences 

Cette liste d'agence n'aura besoin d'être lier qu'à un seul évenement.
En effet, la liste des agence sera chargée au lancement de notre application et elle ne sera pas modifié. Il n'y aura donc qu'un seul évenement à écouter, l'initialisation.
Au moment de l'initialisation on va pouvoir donc injecter notre liste d'agence défini lors de la création de l'écran à l'intérieur de la state.